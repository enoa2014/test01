<!-- components/auth-button/index.wxml -->
<button
  class="{{getButtonClass()}}"
  disabled="{{disabled || loading}}"
  loading="{{loading}}"
  bindtap="handleClick"
>
  <view wx:if="{{hasPermission}}" class="auth-button__content">
    <slot wx:if="{{hasPermission}}">{{getButtonText()}}</slot>
  </view>

  <view wx:else class="auth-button__no-permission">
    <icon wx:if="{{noPermissionIcon}}" type="{{noPermissionIcon}}" size="16" />
    <text class="auth-button__text">{{getButtonText()}}</text>
  </view>
</button>

<!-- 权限不足弹窗 -->
<view class="auth-modal" wx:if="{{showAuthModal}}">
  <view class="auth-modal__mask" bindtap="hideAuthModal"></view>
  <view class="auth-modal__content">
    <view class="auth-modal__header">
      <text class="auth-modal__title">权限不足</text>
      <button class="auth-modal__close" bindtap="hideAuthModal">×</button>
    </view>

    <view class="auth-modal__body">
      <view class="auth-modal__icon">
        <icon type="warn" size="48" color="#ff9500" />
      </view>

      <text class="auth-modal__message">{{noPermissionText}}</text>

      <view class="auth-modal__details">
        <text class="auth-modal__info">{{getPermissionTipContent()}}</text>
      </view>
    </view>

    <view class="auth-modal__actions">
      <button
        class="auth-modal__btn auth-modal__btn--primary"
        bindtap="goApplyPermission"
      >
        申请权限
      </button>

      <button
        class="auth-modal__btn auth-modal__btn--default"
        bindtap="contactAdmin"
      >
        联系管理员
      </button>

      <button
        class="auth-modal__btn auth-modal__btn--text"
        bindtap="viewPermissionHelp"
      >
        权限说明
      </button>

      <button
        class="auth-modal__btn auth-modal__btn--text"
        bindtap="reLogin"
      >
        重新登录
      </button>
    </view>
  </view>
</view>