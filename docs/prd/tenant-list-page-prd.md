# 住户列表页改造 PRD

| 日期       | 版本 | 变更说明                         | 作者            |
| ---------- | ---- | -------------------------------- | --------------- |
| 2024-05-17 | v0.1 | 初稿创建，整理住户列表页优化需求 | 业务分析师 Mary |

## 1. 背景与目标

### 1.1 背景

慈善机构为异地就医的大病儿童家庭提供“小家”服务，现有微信小程序是社工日常管理住户的主要工具。其中的住户列表页承担住户信息概览、状态判断以及快捷操作等工作，但当前界面复杂、信息不足、操作易混淆，影响社工效率。

### 1.2 项目目标

- 提升住户列表页的可读性与可用性，帮助社工快速掌握住户状态与关键信息。
- 减少高频操作（入住、离开、发送消息等）的误操作率，缩短任务完成时间。
- 统一“新建住户”与“入住办理”两个流程入口，降低学习成本。
- 提供可扩展的检索、筛选与排序能力，为后续运营分析奠定基础。

### 1.3 成功指标（建议）

- 建议上线后收集社工主观满意度与任务完成时间数据，以衡量改造成效。
- 若后续可行，统计入住办理从进入列表到操作完成的平均步骤数或耗时。

## 2. 用户与使用场景

### 2.1 核心用户

- **社工（主要操作者）**：负责住户的入离操作、信息更新、通知发送及档案管理。

### 2.2 典型场景

1. 新建住户档案并等待入住。
2. 对已登记但未入住的住户执行入住流程。
3. 查看当前在住住户的关键信息与最近动态。
4. 根据条件快速定位特定住户（例如特定医院的患儿、即将到期的住户）。
5. 批量或连续发送信息、导出报告、办理离开手续。

## 3. 当前痛点概述

- 列表卡片信息不足，缺失“最近入住时间”等高频判断数据。
- “入住”按钮同时承担新建住户与办理入住两种流程，容易造成误操作。
- 长按操作菜单项目过多、未分级，认知负担较高。
- 无有效的高级检索与筛选能力，社工难以按复杂条件组合查找住户。
- 搜索条件无法保存复用，需要重复输入。

## 4. 功能需求（Functional Requirements）

### 4.1 列表信息展示

- **FR1**：住户卡片展示头像、姓名、年龄、标签区域（入住次数、状态）。
- **FR2**：新增“最近一次入住时间”字段；若住户未有入住记录（次数为 0），显示“未入住”或留空处理。
- **FR3**：状态标签支持至少区分“待入住”“已入住”“已离开”等核心状态，并允许未来拓展。

### 4.2 操作入口与流程

- **FR4**：保留列表页悬浮球入口，仅包含“新建住户”操作；执行后仅写入住户数据库，不触发入住流程。
- **FR5**：住户卡片点击进入详情页（沿用现有详情页功能，不在本次改造范围内）。
- **FR6**：住户卡片长按保持弹出底部菜单交互，菜单项至少包含：入住、详情、离开、发送消息、导出报告、删除住户。
- **FR7**：拆分“新建住户”与“入住”操作；“入住”仅对已存在且未入住或可再次入住的住户生效。

### 4.3 检索、筛选与排序

- **FR8**：支持基于姓名、籍贯、性别、民族、年龄段、医生、医院等字段的模糊搜索。
- **FR9**：提供包含时间区间在内的高级筛选，支持多条件组合；筛选逻辑应允许“与 / 或”混合配置。
- **FR10**：支持按最近入住时间、入住次数等关键字段排序，默认展示最近一次有动作的住户。
- **FR11**：搜索与筛选条件可本地化保存（例如保存为预设方案），便于社工复用。

### 4.4 状态与数据同步

- **FR12**：当住户状态变化（入住、离开等）后，列表需实时或近实时刷新对应状态、次数与时间字段。
- **FR13**：支持在列表中直观识别当前入住状态及累计入住次数的变化。

## 5. 非功能需求（Non-Functional Requirements）

- **NFR1**：遵循 `docs/architecture/coding-standards.md` 与 `docs/architecture/tech-stack.md` 中的前端技术规范。
- **NFR2**：优先复用既有的公共组件与工具类，避免重复造轮子。
- **NFR3**：界面与交互需符合微信小程序设计规范与 `docs/design-system`、`docs/uiux` 现有视觉体系。
- **NFR4**：列表加载与筛选操作需保持流畅，普通网络环境下目标响应时间不超过 1 秒。
- **NFR5**：本地化保存的搜索策略需兼顾数据安全，确保仅在当前社工账号下可见。

## 6. UX/UI 指导要点

- 强调住户头像、姓名与状态标签层次，便于快速扫视。
- 使用对比明显的标签样式区分“待入住”“已入住”“已离开”。
- 在卡片中为“最近入住时间”提供可读日期格式，并考虑显示“距今多久”辅助信息。
- 长按弹窗中的操作可按使用频率分组或排序（例如高频操作置顶）。
- 高级筛选面板建议分为“基本条件”“时间范围”“医院/医生”等模块，保持清晰结构。
- 搜索条件保存入口需明显，并提供列表化管理（重命名、删除）。

## 7. 依赖与约束

- 需与现有后端接口配合，确保提供入住次数、入住时间、状态等字段。
- 如需新增字段或接口参数，须与后端团队确认数据库结构与接口改动。
- 复用现有的组件库、图标库与表单控件；若新增组件，需符合项目设计系统。
- 改造不涉及住户详情页，但需验证长按菜单进入详情的路径保持稳定。

## 8. 风险与待确认事项

- 需确认后端是否已有住户状态、入住次数、最近入住时间等字段；如无，需要评估开发工作量。
- 搜索逻辑的本地化存储需确认是否跨设备同步，当前假设为仅本机。
- 若后续引入其他角色（如管理员、志愿者），需评估是否扩展权限控制或列表视图定制。
- 成功指标暂未量化，建议上线后联合运营团队定义追踪方案。

## 9. 附录 / 参考

- 设计规范与技术参考位于 `docs/architecture/`、`docs/design-system/`、`docs/uiux/` 等目录。
- 可参考现有的 `docs/page-designs` 相关页面设计，确保视觉风格一致。
