# 阶段2手动测试清单

> **测试时间**: 2025-10-02
> **测试人员**: Claude
> **测试环境**: 微信开发者工具 + 真机调试
> **测试范围**: 基础组件集成 (pm-card, pm-badge, pm-button, 骨架屏, 空状态)

---

## 测试前准备

### 环境检查

- [ ] (**待人工执行**) 微信开发者工具已启动
- [ ] (**待人工执行**) 项目已加载: `C:\Users\86152\work\test01`
- [ ] (**待人工执行**) 真机调试模式已启用
- [ ] (**待人工执行**) 手机已通过扫码连接

### 测试数据准备

- [ ] (**待人工执行**) **有数据场景**: 确保数据库有患者记录 (正常列表显示)
- [ ] (**待人工执行**) **空数据场景**: 清空数据库或使用测试环境 (显示空状态)
- [ ] (**待人工执行**) **加载场景**: 模拟网络延迟 (显示骨架屏)

---

## 1. pm-button 集成测试 (预计 30 分钟)

### 1.1 顶部操作按钮

- [ ] (**待人工执行**) **"查看分析" 按钮**
  - [ ] 点击反馈: 按钮有视觉按下效果
  - [ ] 功能验证: 成功跳转到分析页面
  - [ ] Ghost 样式: 确认为透明背景 + 主色边框
  - [ ] 尺寸: small 尺寸合适,与设计一致

- [ ] (**待人工执行**) **"患者入住" 按钮**
  - [ ] 点击反馈: 按钮有视觉按下效果
  - [ ] 功能验证: 成功跳转到入住选择页
  - [ ] Primary 样式: 主色背景,白色文字
  - [ ] 尺寸: small 尺寸合适

### 1.2 FAB 浮动按钮

- [ ] (**待人工执行**) **视觉效果**
  - [ ] 位置: 右下角,距离边缘合适 (底部 space-8, 右侧 space-4)
  - [ ] 形状: 完美圆形 (radius-full)
  - [ ] 阴影: 浮动阴影明显 (shadow-floating)
  - [ ] 尺寸: 112rpx × 112rpx,大小合适
  - [ ] 图标: "+" 图标居中,大小合适 (text-xl)

- [ ] (**待人工执行**) **交互效果**
  - [ ] 点击反馈: 按钮有明显按下效果
  - [ ] 功能验证: 成功跳转到患者入住页
  - [ ] Elevated 效果: 阴影增强

- [ ] (**待人工执行**) **无障碍**
  - [ ] aria-label: "添加患者" 正确设置
  - [ ] 屏幕阅读器: 能正确朗读按钮用途 (如可测试)

### 1.3 批量模式工具栏按钮

- [ ] (**待人工执行**) **进入批量模式** (长按患者卡片)
  - [ ] 工具栏显示: 批量工具栏正确出现
  - [ ] 按钮样式: 三个按钮 (清空/全选/完成) 样式正确

- [ ] (**待人工执行**) **"清空" 按钮**
  - [ ] 点击反馈: 按钮有视觉效果
  - [ ] 功能验证: 清除所有选中项
  - [ ] Ghost 样式: default + ghost 样式正确

- [ ] (**待人工执行**) **"全选" 按钮**
  - [ ] 点击反馈: 按钮有视觉效果
  - [ ] 功能验证: 选中所有患者
  - [ ] Ghost 样式: default + ghost 样式正确

- [ ] (**待人工执行**) **"完成" 按钮**
  - [ ] 点击反馈: 按钮有视觉效果
  - [ ] 功能验证: 退出批量模式
  - [ ] Primary 样式: 主色背景突出

### 1.4 空状态操作按钮

- [ ] (**待人工执行**) **"立即添加" 按钮**
  - [ ] 点击反馈: 按钮有视觉效果
  - [ ] 功能验证: 跳转到患者入住页
  - [ ] 样式: Primary + Medium 尺寸合适
  - [ ] 位置: 居中对齐,与空状态协调

---

## 2. pm-card 集成测试 (预计 20 分钟)

### 2.1 空状态卡片

- [ ] (**待人工执行**) **容器样式**
  - [ ] 卡片圆角: 符合设计规范
  - [ ] 卡片阴影: 阴影效果正确
  - [ ] 内边距: padding 合适,内容不拥挤
  - [ ] 背景色: 与页面背景协调

- [ ] (**待人工执行**) **Header 区域**
  - [ ] 标题显示: "暂无患者档案" 正确显示
  - [ ] 标题样式: 字体大小、颜色、对齐正确

- [ ] (**待人工执行**) **Body 区域 (默认 slot)**
  - [ ] 插图显示: `/assets/images/empty-patients.svg` 正确加载
  - [ ] 插图尺寸: 320rpx × 240rpx 合适
  - [ ] 描述文字: "点击右下角按钮添加第一位患者" 显示正确
  - [ ] 文字样式: 字体大小 (text-sm)、颜色 (text-secondary) 正确

- [ ] (**待人工执行**) **Footer 区域 (footer slot)**
  - [ ] 按钮显示: "立即添加" 按钮正确显示
  - [ ] 按钮对齐: 居中对齐
  - [ ] 间距: 与 body 区域间距合适 (space-2)

### 2.2 患者卡片 (通过 patient-card 组件)

- [ ] **确认未直接使用 pm-card**
  - [ ] 验证: 患者列表使用 `<patient-card>` 组件
  - [ ] 说明: patient-card 内部可能使用 pm-card,这符合组件化设计

---

## 3. pm-badge 集成测试 (预计 15 分钟)

### 3.1 患者卡片徽章 (通过 patient-card)

- [ ] (**待人工执行**) **徽章显示**
  - [ ] 状态徽章: 在住/随访/其他状态徽章正确显示
  - [ ] 徽章颜色: success (在住) / info (随访) / default (其他) 颜色正确
  - [ ] 徽章尺寸: small 尺寸合适,不过大或过小

- [ ] (**待人工执行**) **徽章布局**
  - [ ] 对齐方式: 徽章水平/垂直对齐正确
  - [ ] 间距: 多个徽章之间间距合适 (space-1 = 8rpx)
  - [ ] 响应式: 徽章在不同屏幕尺寸下显示正常

- [ ] **徽章交互**
  - [ ] 点击测试: 徽章不影响卡片点击事件
  - [ ] 长按测试: 徽章不影响卡片长按事件

---

## 4. 骨架屏测试 (预计 20 分钟)

### 4.1 骨架屏显示

- [ ] **触发骨架屏**
  - [ ] 方法1: 首次进入页面 (清除缓存)
  - [ ] 方法2: 下拉刷新
  - [ ] 方法3: 模拟慢网络 (开发者工具网络限速)

- [ ] **骨架屏结构**
  - [ ] 数量: 显示 4 个骨架卡片
  - [ ] 布局: 垂直排列,间距合适 (space-3)
  - [ ] 容器: 骨架卡片有正确的背景和圆角

### 4.2 骨架屏样式

- [ ] **头像骨架**
  - [ ] 形状: 圆形 (radius-full)
  - [ ] 尺寸: 112rpx × 112rpx
  - [ ] 颜色: 使用设计令牌 (bg-tertiary / bg-secondary)
  - [ ] 动画: 渐变加载动画流畅

- [ ] **文本行骨架**
  - [ ] 标题行: 宽度 40%,高度 32rpx,圆角 radius-sm
  - [ ] 普通行: 高度 24rpx,圆角 radius-sm
  - [ ] 颜色: 与头像一致
  - [ ] 动画: 与头像同步

- [ ] **徽章骨架**
  - [ ] 显示: 2 个徽章占位符
  - [ ] 布局: 水平排列,间距合适

- [ ] **快捷操作骨架**
  - [ ] 显示: 3 个 chip 占位符
  - [ ] 布局: 水平排列,间距合适

### 4.3 骨架屏动画

- [ ] **动画效果**
  - [ ] 类型: 从左到右的渐变扫描
  - [ ] 时长: 1.4s 循环
  - [ ] 流畅度: 目标 60fps (目测是否卡顿)
  - [ ] 性能: CPU 占用合理,不过热

- [ ] **动画细节**
  - [ ] 渐变方向: 90deg (水平)
  - [ ] 渐变色: bg-tertiary → bg-secondary → bg-tertiary
  - [ ] 背景尺寸: 200% × 100%
  - [ ] 缓动函数: ease

### 4.4 骨架屏切换

- [ ] **加载完成**
  - [ ] 过渡: 骨架屏平滑切换到真实内容
  - [ ] 无闪烁: 切换过程无白屏或闪烁
  - [ ] 数据对应: 骨架数量与真实数据量匹配感

---

## 5. 空状态测试 (预计 20 分钟)

### 5.1 触发空状态

- [ ] **测试方法**
  - [ ] 方法1: 数据库无患者记录
  - [ ] 方法2: 搜索结果为空 (如果支持搜索)
  - [ ] 确认: `displayPatients.length === 0` 且 `!loading && !error`

### 5.2 空状态视觉效果

- [ ] **整体布局**
  - [ ] 居中对齐: 空状态在页面中垂直居中
  - [ ] 间距: 元素间距舒适,不拥挤

- [ ] **插图**
  - [ ] 加载: `empty-patients.svg` 成功加载显示
  - [ ] 尺寸: 320rpx × 240rpx 合适
  - [ ] 透明度: opacity 0.8,柔和不刺眼
  - [ ] 质量: SVG 清晰,无锯齿

- [ ] **文案**
  - [ ] 标题: "暂无患者档案" 清晰可读
  - [ ] 描述: "点击右下角按钮添加第一位患者" 清晰可读
  - [ ] 字体: 标题更大更粗,描述较小较淡
  - [ ] 颜色: 标题主色,描述次级色 (text-secondary)

- [ ] **操作按钮**
  - [ ] 显示: "立即添加" 按钮突出
  - [ ] 位置: 在描述下方,居中
  - [ ] 样式: Primary 主色按钮,Medium 尺寸
  - [ ] 间距: 与描述间距 space-2

### 5.3 空状态交互

- [ ] **按钮点击**
  - [ ] 反馈: 点击有视觉按下效果
  - [ ] 功能: 成功跳转到患者入住页
  - [ ] 流畅: 页面跳转动画流畅

- [ ] **FAB 按钮**
  - [ ] 显示: 空状态时 FAB 仍然显示
  - [ ] 功能: FAB 按钮功能正常
  - [ ] 说明: 提供两个入口添加患者

### 5.4 空状态响应式

- [ ] **不同屏幕尺寸**
  - [ ] 小屏 (iPhone SE): 插图和文字尺寸合适,不溢出
  - [ ] 中屏 (iPhone 13): 布局协调,间距舒适
  - [ ] 大屏 (iPad): 空状态不过于分散,仍然聚焦

- [ ] **横屏测试**
  - [ ] 插图: 横屏时插图不变形
  - [ ] 布局: 元素仍然居中对齐

---

## 6. 无障碍测试 (预计 15 分钟)

### 6.1 屏幕阅读器测试 (iOS VoiceOver)

- [ ] **启用 VoiceOver**
  - [ ] iOS: 设置 → 辅助功能 → 旁白 (VoiceOver)
  - [ ] Android: 设置 → 辅助功能 → TalkBack (如可用)

- [ ] **FAB 按钮**
  - [ ] 朗读: "添加患者,按钮" 或类似内容
  - [ ] aria-label: 正确识别 aria-label 属性

- [ ] **顶部操作按钮**
  - [ ] "查看分析": 朗读 "查看分析,按钮"
  - [ ] "患者入住": 朗读 "患者入住,按钮"
  - [ ] aria-label: 正确识别

- [ ] **空状态按钮**
  - [ ] "立即添加": 朗读 "立即添加,按钮"

- [ ] **患者卡片**
  - [ ] 卡片: 朗读患者姓名和关键信息
  - [ ] 徽章: 朗读状态信息 (如 "在住")

### 6.2 键盘导航 (如支持)

- [ ] **Tab 键导航**
  - [ ] 焦点顺序: 搜索框 → 排序 → 操作按钮 → 患者卡片 → FAB
  - [ ] 焦点可见: 当前焦点有明显视觉指示

- [ ] **回车键**
  - [ ] 按钮: 回车键可激活按钮
  - [ ] 卡片: 回车键可打开患者详情

---

## 7. 综合场景测试 (预计 20 分钟)

### 7.1 首次加载流程

- [ ] (**待人工执行**) **步骤**:
  1. [ ] 清除小程序缓存
  2. [ ] 关闭并重新打开小程序
  3. [ ] 进入首页

- [ ] (**待人工执行**) **预期**:
  - [ ] 显示骨架屏 (1-2 秒)
  - [ ] 骨架屏动画流畅
  - [ ] 平滑切换到真实内容 (有数据)
  - [ ] 或平滑切换到空状态 (无数据)

### 7.2 下拉刷新流程

- [ ] (**待人工执行**) **步骤**:
  1. [ ] 在患者列表页下拉
  2. [ ] 观察加载状态
  3. [ ] 等待数据加载完成

- [ ] (**待人工执行**) **预期**:
  - [ ] 下拉时显示刷新提示
  - [ ] 显示骨架屏或 loading 状态
  - [ ] 数据更新成功
  - [ ] 页面滚动位置保持或恢复

### 7.3 空数据 → 有数据切换

- [ ] (**待人工执行**) **步骤**:
  1. [ ] 在空状态点击 "立即添加"
  2. [ ] 完成患者入住流程
  3. [ ] 返回首页

- [ ] (**待人工执行**) **预期**:
  - [ ] 空状态消失
  - [ ] 显示新添加的患者卡片
  - [ ] 卡片数据正确
  - [ ] 徽章和快捷操作正确

### 7.4 批量操作流程

- [ ] (**待人工执行**) **步骤**:
  1. [ ] 长按患者卡片进入批量模式
  2. [ ] 点击多个患者选中
  3. [ ] 使用 "清空" 取消选择
  4. [ ] 使用 "全选" 选中所有
  5. [ ] 点击 "完成" 退出批量模式

- [ ] (**待人工执行**) **预期**:
  - [ ] 批量工具栏正确显示/隐藏
  - [ ] 选中状态正确更新
  - [ ] 选中数量统计正确
  - [ ] 卡片样式变化明显

---

## 测试结果汇总

### 发现问题 (按优先级)

**P0 - 阻断性问题**:

- [ ] 问题1: [描述]
- [ ] 问题2: [描述]

**P1 - 严重问题**:

- [ ] 问题1: [描述]
- [ ] 问题2: [描述]

**P2 - 一般问题**:

- [ ] 问题1: [描述]
- [ ] 问题2: [描述]

**P3 - 优化建议**:

- [ ] 建议1: [描述]
- [ ] 建议2: [描述]

### 通过情况统计

- pm-button 集成: **_ / _** 通过
- pm-card 集成: **_ / _** 通过
- pm-badge 集成: **_ / _** 通过
- 骨架屏: **_ / _** 通过
- 空状态: **_ / _** 通过
- 无障碍: **_ / _** 通过
- 综合场景: **_ / _** 通过

**总体通过率**: \_\_\_\_%

### 下一步行动

1. [ ] 修复 P0/P1 问题
2. [ ] 补充单元测试
3. [ ] 更新 TODO.md 测试状态
4. [ ] 准备阶段3开发

---

## 附录: 测试截图

### 骨架屏

- [ ] 截图1: 骨架屏整体效果
- [ ] 截图2: 骨架屏动画过程

### 空状态

- [ ] 截图1: 空状态整体效果
- [ ] 截图2: 空状态按钮交互

### 按钮

- [ ] 截图1: 顶部操作按钮
- [ ] 截图2: FAB 浮动按钮
- [ ] 截图3: 批量工具栏按钮

### 问题截图

- [ ] 问题1: [截图]
- [ ] 问题2: [截图]
