# 响应式设计与适配指南

## 目标
- 在微信小程序生态内实现“移动优先 + 渐进增强”的响应式布局方案。
- 统一断点、网格与栅格规范，保障核心页面在手机、平板、桌面端的一致体验。
- 满足无障碍、性能与多设备可用性要求。

## 断点体系
| 名称 | 范围 (逻辑像素) | 主要设备 | 描述 |
|------|-----------------|----------|------|
| xs | ≤ 320 pt | 小屏手机 | 纵向单列、重要信息折叠、强调快捷操作 |
| sm | 321-375 pt | 标准手机 | 默认布局，底部操作按钮固定 |
| md | 376-768 pt | 大屏手机、平板竖屏 | 双列布局、支持抽屉筛选 |
| lg | 769-1024 pt | 平板横屏 | 双/三列布局、增强图表展示 |
| xl | > 1024 pt | 桌面或投屏 | 多列布局、并行面板、辅助信息常驻 |

## 网格与间距
- 基础单位：8px（对应 16rpx）。
- 栅格系统：
  - 手机：单列/双列（12 列逻辑）
  - 平板：12 列（72rpx 列宽 + 24rpx 间距）
  - 桌面：12/16 列（自适应列宽）
- 组件间距：模块间 32rpx、同组元素 16rpx、元素内部 8rpx。
- 使用设计系统的 `space` 令牌，禁止硬编码值。

## 布局模式
### 仪表盘
- 手机：模块纵向排列；图表可横向滑动；快捷操作使用水平滚动卡片。
- 平板：左右两列，左侧 KPI+待办，右侧图表与快捷操作。
- 桌面：三列布局，右侧固定辅助栏。

### 患者列表
- 手机：卡片列表，顶部搜索固定。
- 平板：卡片 + 抽屉筛选；批量操作栏固定顶部。
- 桌面：表格视图 + 右侧辅助筛选，支持并排组件。

### 患者详情
- 手机：单列滚动，顶部概览固定；时间轴放底部。
- 平板：主信息与辅助信息并排；编辑时弹出侧边面板。
- 桌面：左右双栏 + 底部时间轴，提供锚点导航。

### 入住流程
- 手机：分屏（上方步骤条 + 下方表单）；操作按钮固定底部。
- 平板：步骤条居上，表单居中，摘要信息置右侧。
- 桌面：步骤条左侧垂直排列，表单与资料清单并列。

## 组件适配原则
- **按钮**：大屏使用 `btn-lg`，小屏使用 `btn-md`；触控目标保持 ≥ 88rpx。
- **表单**：字段在手机端占据整行；平板/桌面端按 1/2 或 1/3 列布局；错误提示在小屏使用内联提示，大屏使用气泡提示。
- **图表**：支持最小高度 240rpx；当宽度不足时自动切换至简化模式或提供横向滚动。
- **表格**：手机端转换为卡片视图；平板端支持横向滚动；桌面端可固定列与列宽拖拽。
- **抽屉/弹窗**：手机端全屏弹层；平板端 80% 宽度；桌面端 480-640rpx。
- **时间轴**：手机端纵向滚动；大屏支持左右双栏或批量展开。

## 动效与过渡
- 统一使用 `transition-` 工具类，时长 150-250ms。
- 忽略不必要的动画，尊重系统的“减少动态效果”设置。
- 列表/卡片 hover 仅在桌面端出现，移动端以阴影或背景色反馈。

## 无障碍适配
- 断点切换时保持 Tab 顺序一致，避免焦点丢失。
- 确保不同视图下的 ARIA 标签与阅读顺序正确。
- 提供文字缩放支持：字体使用 `rem` 或设计系统令牌。
- 提供高对比度主题（`data-theme="high-contrast"`），在主样式中定义颜色映射。

## 性能优化
- 按需加载组件与数据，避免一次性渲染所有模块。
- 列表与时间轴使用虚拟滚动；图表延迟加载或懒加载。
- 图片与附件使用自适应尺寸与 WebP 格式。
- 缓存布局偏好（视图切换、列配置）到本地存储。

## 验收清单
- [ ] 核心页面在手机、平板、桌面端均完成适配并通过手工测试。
- [ ] 快捷操作、搜索、筛选模块在不同断点下可用。
- [ ] 表格与图表在横向滚动时保持一致交互。
- [ ] 无障碍工具（如微信无障碍扫描）检测通过。
- [ ] 性能监控：首屏加载 < 2s，交互响应 < 100ms。

## 文档信息
- **版本**：1.0
- **更新时间**：2025-09-22
- **负责人**：前端 & 设计协作组
