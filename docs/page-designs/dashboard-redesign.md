# 仪表盘（Dashboard）页面重设计方案

## 设计目标
1. **一屏洞察**：在 3 秒内展示项目关键指标、告警与待办，帮助护理与管理人员快速掌握整体情况。
2. **快捷行动**：提供高频操作的快速入口（新增患者、导出报表、常用筛选）并显著提示待处理事项。
3. **情境感知**：根据用户角色与当前任务推荐相关信息模块，实现个性化体验。
4. **无障碍与性能**：遵循设计系统令牌、支持 WCAG 2.1 AA、首屏加载 < 2 秒。

## 页面信息结构
```
Dashboard
├─ 顶部头部区（Greeting + 今日概况 + 通知）
├─ 指标概览区（KPI 卡片 + 趋势图 + 风险提示）
├─ 快捷操作区（常用操作按钮 + 智能建议）
├─ 待办与最新动态（任务列表 + 入住流程状况 + 文档提醒）
└─ 深度分析区（入住漏斗、床位利用率、志愿者排班）
```

## 模块说明
### 1. 顶部头部区
- **背景色**：`var(--color-bg-primary)`，高度 120rpx。
- **内容**：问候语 + 当前日期天气 + 通知图标（含红点 Badge）+ 个人菜单。
- **交互**：
  - 点击通知图标展开侧边抽屉，展示近 7 天系统事件。
  - 用户菜单支持切换角色视图与进入设置。

### 2. 指标概览区
- **KPI 卡片**：4 张（在院患者数、今日入/出院、床位占用率、风险预警）。
  - 使用设计令牌 `card` 组件，强对比标题 + 次级描述。
  - 状态标签区分“正常/预警/风险”，颜色遵循语义色。
- **趋势图**：选择过去 7 天入院趋势折线图与志愿者排班热力图。
- **风险提示**：卡片中列出高风险患者数量与关键原因，可点击进入患者详情筛选视图。

### 3. 快捷操作区
- **操作项**：新建入住、一键导出日报、批量通知、快速跳转患者列表常用筛选。
- **智能建议**：根据用户历史操作或系统事件，推荐“继续补充患者 X 的资料”“检查志愿者排班”等待办。
- **样式**：使用按钮 `btn-lg` 与卡片 `card-compact` 组合，保持触达显著。

### 4. 待办与最新动态
- **任务列表**：按优先级排序，展示待完成事项、责任人、截止时间、快捷操作。
- **时间轴**：显示最近 10 条患者事件、入住审批、文件上传状态；支持筛选。
- **状态反馈**：完成任务后显示 Success Toast，同时刷新 KPI 区域。

### 5. 深度分析
- **入住漏斗**：展示申请→审核→成功入住的转化，提供异常提示。
- **床位利用率**：按房型/楼层分类的条形图，支持切换时间维度。
- **志愿者排班**：日历式卡片，显示空缺时段并提供补位入口。

## 交互与动效规范
- 所有卡片 hover 使用 `--shadow-sm`，点击采用 `scale 0.98` 动效，时长 150ms。
- 数据加载采用骨架屏 + 渐进加载，避免布局跳动。
- 待办列表支持键盘上下键选中、Enter 打开详情，保持无障碍。
- 通知抽屉遵循 300ms ease-out，从右侧滑入。

## 无障碍要求
- 所有文案使用语义化标签（h1/h2、list、button）。
- 关键指标卡片需提供 `aria-label` 描述，例如“在院患者 120 人，比昨日增加 5%”。
- 高对比度模式下通过 `data-theme="high-contrast"` 切换色板。
- 键盘顺序：头部 → KPI 卡片（从上到下）→ 快捷操作 → 待办 → 深度分析。

## 响应式与适配
| 尺寸 | 布局策略 |
|------|-----------|
| 手机（≤ 375pt） | 模块纵向堆叠；KPI 卡片单列滚动；图表提供横向滑动容器。 |
| 平板（376-768pt） | KPI 区双列；待办区域与深度分析并列；头部模块左右分布。 |
| 桌面（> 768pt） | 三列布局：左侧 KPI + 待办，中间深度分析，右侧快捷操作；头部固定浮层。 |

## 性能与数据刷新
- 首屏仅加载 KPI、待办与快捷操作；深度分析模块延迟加载。
- 使用 WebSocket 推送告警与待办更新，同时提供手动刷新。
- 断网状态下显示离线提示，展示缓存的上一次数据时间戳。

## 度量与验收
- KPI 卡片加载时间 < 1s，整体首屏 < 2s。
- 待办完成交互成功率 ≥ 98%。
- 5 名测试用户在 30 秒内完成“定位重点患者并查看详情”的任务。
- 仪表盘整体满意度调研 ≥ 4.5/5。

## 文档信息
- **版本**：1.1
- **更新时间**：2025-09-22
- **负责人**：产品设计团队
