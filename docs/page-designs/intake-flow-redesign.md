# 入住流程（三步向导）重设计方案

## 设计目标
1. **流程简化**：将原 5 步流程缩减为 3 步向导，平均完成时间从 15 分钟降低到 9 分钟以内。
2. **智能校验**：通过自动预填、实时校验与提示，降低错误率 60%。
3. **资料合规**：强化文件上传、资质核验与签署确认，确保流程可追踪。
4. **可扩展**：支持多路径（已有档案/新建档案）、回退与草稿保存。

## 用户流程概览
```
入口 → 选择路径
         ├─ 现有患者快速入住（匹配档案 → 确认信息 → 完成）
         └─ 新患者完整建档（三步向导）

三步向导：
1. 基础信息（身份、联系、基本需求）
2. 医疗与资质（诊断、医院、资助证明、风险评估）
3. 入住安排（床位、服务计划、附件上传、签署确认）
```

## 核心界面说明
### 入口页
- 显示流程概览、预计耗时、资料准备清单。
- 提供“已有档案匹配”与“新建档案”两个按钮。
- 显示最近被中断的草稿，支持继续。

### Step 1：基础信息
- **字段**：姓名、身份证件、出生日期、性别、联系方式、紧急联系人、家庭情况。
- **体验优化**：
  - 自动检测身份证件填写，自动计算年龄。
  - 联系方式支持双号码、微信号，并提供格式校验。
  - 家庭情况以单选/多选标签呈现。
- **预填逻辑**：如从现有档案进入，字段默认带出可编辑。

### Step 2：医疗与资质
- **字段**：疾病类型、主治医院、主治医生、诊断证明、治疗阶段、风险等级。
- **功能**：
  - 提供常见病种、医院下拉及模糊搜索。
  - 支持上传诊断证明、医保材料，自动分类。
  - 显示风险评估问卷（5 个问题），系统自动计算等级。
- **错误提示**：若证明文件缺失或不合规，显示红色提示并提供模板下载。

### Step 3：入住安排
- **字段**：入住批次、床位类型、预计时长、志愿者需求、注意事项。
- **附件**：支持拖拽/批量上传，自动命名与分类，可标记敏感级别。
- **确认**：展示入住协议摘要，需勾选确认；最后显示完成反馈。
- **后续动作**：完成后可立即创建跟进任务、发送通知给团队或家属。

## 流程交互与状态
- 顶部展示步骤进度条，支持返回前一步保留数据。
- 支持保存草稿（自动或手动），草稿保留 7 天。
- 校验错误将定位到具体字段，并在侧栏列出错误摘要。
- 完成后展示成功页面，提供下一步建议与快捷入口（查看详情、添加附件、安排志愿者）。

## 无障碍与多终端适配
- 所有输入控件具备标签与帮助文本，屏幕阅读器可识别。
- 提供键盘快捷键（Alt+←/→ 切换步骤，Ctrl+S 保存草稿）。
- 移动端采用分屏设计：上方显示步骤，下方为表单内容，关键按钮固定底部。
- 触控目标 ≥ 88rpx；错误提示采用文本 + 图标双重反馈。

## 技术与性能建议
- 各步骤独立保存，使用分段 API（Step1/Step2/Step3），避免数据丢失。
- 文件上传使用分片与并发上传，支持断点续传与失败重试。
- 风险评估通过前端表单提交至后端计算，并存储评分详情。
- 完成后触发队列任务发送通知（短信/小程序订阅消息）。

## 度量指标
- 平均完成时间 ≤ 9 分钟。
- 流程完成率 ≥ 85%。
- 错误提示成功率 ≥ 95%，重复输入字段减少 60%。
- 附件上传成功率 ≥ 98%。
- 用户满意度 ≥ 4.5/5。

## 验收清单
- [ ] 三步向导界面与交互符合设计原型。
- [ ] 现有档案和新建档案路径均完整可用。
- [ ] 所有字段具备实时校验与错误提示。
- [ ] 草稿保存、恢复与删除流程可用。
- [ ] 附件自动分类、权限与日志记录可用。
- [ ] 协议确认与通知流程可追踪。
- [ ] 符合 WCAG 2.1 AA，无障碍审查通过。

## 文档信息
- **版本**：1.1
- **更新时间**：2025-09-22
- **负责人**：产品设计团队
