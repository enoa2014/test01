# Story 1.20: patient-copywriting-consistency

## Status

Approved

## Story

**As a** 内容与前端协作者,
**I want** 统一小程序的状态文案与提示语调,
**so that** 用户在不同页面获得一致、明确的引导，减少歧义与误操作。

## Story Context

- **Existing System Integration**: 涉及列表、详情、附件、录入、分析等页面的提示文案、空态、错误状态与按钮文本。
- **Technology Stack**: 微信小程序原生框架，文案多以常量或直接写在模板中。
- **Follows Pattern**: 结合设计系统与 UX 指南，输出标准文案表并落地到页面。
- **Touch Points**: `wx-project/utils/i18n`（若存在）、各页面 WXML/JS 中的文案、`docs/` 文案规范文档。

## Acceptance Criteria

1. 建立状态与文案标准表，覆盖信息（info）、提醒（warning）、阻断（danger）、成功（success）四类场景，明确中文文案与用途；标准表需存放于 `docs/` 并便于后续维护。
2. 在详情、列表、附件、录入等页面替换旧文案，确保语气统一、包含行动提示，例如“暂无权限查看附件。去联系管理员”。
3. 对危险/阻断操作提供结构化文案（标题 + 说明 + 操作指引），Toast 与 Dialog 中保持一致格式。
4. 文案更新后通过产品/UX 审核；更新相应测试快照或断言，确保不因文案变化导致测试失败。

## Tasks / Subtasks

- [ ] 文案标准表输出（AC1）
  - [ ] 整理现有文案并在 `docs/` 下新增文案规范文件，列出状态类别、文案模板、使用场景。[Source: architecture/source-tree.md#结构说明]
  - [ ] 与产品/UX 核对语气、标点与术语一致性。[Source: architecture/coding-standards.md#1-通用约定]
- [ ] 页面落地（AC2、AC3）
  - [ ] 更新页面模板/脚本中的文案，优先使用常量或集中定义，确保危险操作文案结构化。[Source: architecture/coding-standards.md#4-小程序代码规范]
  - [ ] 调整 Toast/Dialog 调用，引用标准文案并保留变量占位能力。[Source: architecture/tech-stack.md#1-客户端（微信小程序）]
- [ ] 审核与测试（AC4）
  - [ ] 发起产品/UX 审核，记录确认结果；更新测试断言/快照。[Source: architecture/tech-stack.md#4-测试体系]
  - [ ] 在变更记录或 README 中说明文案更新范围与维护方式。[Source: architecture/source-tree.md#结构说明]

## Project Structure Notes

- 文案规范建议存放于 `docs/design-system/` 或 `docs/ux/` 下，页面代码位于 `wx-project/pages/`，符合结构基线。[Source: architecture/source-tree.md#source-tree-baseline]
- 不涉及后端改动。

## Dev Notes

- **Previous Story Insights**: 详情页状态语义（Story 1.15）与反馈统一（Story 1.18）需协同使用统一文案。
- **Data Models**: 无数据调整。[No specific guidance found in architecture docs]
- **API Specifications**: 错误码需映射至标准文案，保持结构 `{ code, message }`。[Source: architecture/tech-stack.md#3-云函数与后端协作]
- **Component Specifications**: Toast/Dialog/空态组件遵循设计系统规范。[Source: architecture/coding-standards.md#4-小程序代码规范]
- **File Locations**: 文案常量可集中于 `wx-project/utils/constants.js` 或新文件；参考 `source-tree` 基线。[Source: architecture/source-tree.md#source-tree-baseline]
- **Testing Requirements**: 更新相关测试断言，确保覆盖率保持；必要时编写快照比对。[Source: architecture/tech-stack.md#4-测试体系]
- **Technical Constraints**: 注意多语言扩展（若未来引入），保留抽象层次。

## Definition of Done

- [ ] 验收标准全部满足并经产品/UX 审核
- [ ] 文案标准表入库并同步给团队
- [ ] 页面文案替换完成且测试通过
- [ ] 文档/变更记录更新
- [ ] 代码通过 lint、CI

## Risk & Mitigation

- **风险**：文案变更影响用户认知
  - **缓解**：与产品/UX 联合评审，必要时灰度发布
- **风险**：测试快照频繁变更
  - **缓解**：抽象常量，在测试中引用常量而非硬编码
- **回滚策略**：保留旧文案备份，如反馈不佳可快速恢复

## Testing

- 单元测试：文案映射函数、危险操作确认逻辑
- 集成测试：关键流程文案断言（录入失败、附件权限等）
- 手工测试：审阅各页面提示语气与状态分类

## Change Log

| Date       | Version | Description                                      | Author |
| ---------- | ------- | ------------------------------------------------ | ------ |
| 2025-09-23 | v0.1    | 基于 UX 评估输出文案状态规范统一故事草稿         | Bob   |

## QA Results

- Gate: 未评估
- Rationale: 待 QA 审查
- Must-fix Follow-up: 待定
- Should-monitor: 待定
- Tests: 待定
- Decision: N/A
