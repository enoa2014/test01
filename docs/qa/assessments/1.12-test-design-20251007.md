# Test Design: Story 1.12

Date: 2025-10-07
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 11
- Unit tests: 3 (27%)
- Integration tests: 5 (45%)
- E2E tests: 3 (27%)
- Priority distribution: P0: 3, P1: 6, P2: 2

## Test Scenarios by Acceptance Criteria

### AC1: 排序控制

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-UNIT-001   | Unit        | P1       | Sort helper sorts by uploadedAt/size/type correctly       | Pure comparator logic |
| 1.12-INT-001    | Integration | P1       | Toggle sort options and assert rendered order updates     | Component interaction |
| 1.12-E2E-001    | E2E         | P1       | User switches sorting on device and observes correct order | Core UX flow |

### AC2: 筛选选项组合

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-UNIT-002   | Unit        | P2       | Filter predicate returns expected subset for each category | Logic-only filtering |
| 1.12-INT-002    | Integration | P1       | Apply multi-filter combination and ensure UI badges + list match | Ensures state sync |

### AC3: 批量选择与删除

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-INT-003    | Integration | P0       | Select multiple items, confirm payload to delete API, verify quota refresh | Safeguards destructive action |
| 1.12-E2E-002    | E2E         | P0       | Device flow: select, confirm dialog, observe list/quota update | Prevents data loss defects |

### AC4: 空态与错误态展示

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-INT-004    | Integration | P1       | Mock empty/error states and assert pm-button variants & copy | Visual contract |
| 1.12-E2E-003    | E2E         | P2       | Force network failure, verify retry control + messaging on device | User assurance |

### AC5: 可访问性与弱网禁用

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-INT-005    | Integration | P0       | Assert aria attributes, focus order, and disabled state during loading | Accessibility compliance |

### AC6: 不破坏既有功能

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.12-UNIT-003   | Unit        | P2       | Ensure legacy upload quota calculator outputs unchanged   | Regression guard |

## Risk Coverage

- Destructive bulk delete risk covered by 1.12-INT-003 & 1.12-E2E-002.
- Accessibility regression mitigated by 1.12-INT-005.
- Filtering correctness ensured by 1.12-UNIT-002.

## Recommended Execution Order

1. 1.12-UNIT-001
2. 1.12-UNIT-002
3. 1.12-UNIT-003
4. 1.12-INT-001
5. 1.12-INT-002
6. 1.12-INT-003
7. 1.12-INT-004
8. 1.12-INT-005
9. 1.12-E2E-001
10. 1.12-E2E-002
11. 1.12-E2E-003
