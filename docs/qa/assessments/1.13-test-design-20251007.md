# Test Design: Story 1.13

Date: 2025-10-07
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 7
- Unit tests: 3 (43%)
- Integration tests: 3 (43%)
- E2E tests: 1 (14%)
- Priority distribution: P0: 1, P1: 4, P2: 2

## Test Scenarios by Acceptance Criteria

### AC1: 统一语义变量与迁移标注

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.13-UNIT-001   | Unit        | P1       | Lint rule tests ensure banned `--color-*` tokens replaced | Pure static validation |
| 1.13-INT-001    | Integration | P1       | Build pipeline test confirming generated WXSS retains mappings | Ensures build artifact correctness |

### AC2: 主题入口可发现

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.13-INT-002    | Integration | P1       | Render ThemeIndicator component to verify pm-button layout & aria-label | Visual component check |
| 1.13-E2E-001    | E2E         | P1       | Device: change theme via new entry, assert theme toggles and persists | User-facing flow |

### AC3: 圆角/阴影/间距统一令牌

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.13-UNIT-002   | Unit        | P2       | Snapshot diff of Tailwind input ensuring token references only | Static config check |
| 1.13-INT-003    | Integration | P1       | Visual regression baseline on key components verifying spacing tokens applied | Component-level confirmation |

### AC4: 主题巡检与构建

| ID              | Level       | Priority | Test                                                      | Justification |
| --------------- | ----------- | -------- | --------------------------------------------------------- | ------------- |
| 1.13-UNIT-003   | Unit        | P0       | Automated tokens:generate pipeline smoke test detects failure | Prevents release block |

## Risk Coverage

- Token regression risk mitigated via 1.13-UNIT-001/002/003.
- Theme UX regression mitigated via 1.13-E2E-001.

## Recommended Execution Order

1. 1.13-UNIT-001
2. 1.13-UNIT-002
3. 1.13-UNIT-003
4. 1.13-INT-001
5. 1.13-INT-002
6. 1.13-INT-003
7. 1.13-E2E-001
