# æ‚£è€…åˆ—è¡¨é¡µ UI é‡æ„å»ºè®®

> **åˆ†æå¯¹è±¡**: `miniprogram/pages/index/`
> **å½“å‰ç‰ˆæœ¬**: ç°æœ‰å®ç°ï¼ˆ2025-10-01ï¼‰
> **é‡æ„ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒã€ä¿¡æ¯å¯†åº¦ã€è§†è§‰å±‚æ¬¡

---

## ğŸ“‹ ç›®å½•

- [å½“å‰å®ç°åˆ†æ](#å½“å‰å®ç°åˆ†æ)
- [UI/UX é—®é¢˜è¯Šæ–­](#uiux-é—®é¢˜è¯Šæ–­)
- [é‡æ„è®¾è®¡æ–¹æ¡ˆ](#é‡æ„è®¾è®¡æ–¹æ¡ˆ)
- [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
- [é™„å½•](#é™„å½•)

---

## å½“å‰å®ç°åˆ†æ

### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hero åŒºåŸŸ                   â”‚ â† æ ‡é¢˜ + å‰¯æ ‡é¢˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Toolbar åŒºåŸŸ                â”‚
â”‚  â”œâ”€ æœç´¢æ¡†                   â”‚
â”‚  â”œâ”€ æ’åºé€‰æ‹©å™¨               â”‚
â”‚  â””â”€ æ“ä½œæŒ‰é’®ï¼ˆæŸ¥çœ‹åˆ†æ/å…¥ä½ï¼‰â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‚£è€…å¡ç‰‡åˆ—è¡¨                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ å§“å       å…¥ä½æ¬¡æ•°  â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  â”‚ æ€§åˆ«  å¹´é¾„  æœ€è¿‘å…¥ä½ â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚
â”‚  â”‚ é¦–æ¬¡è¯Šæ–­: xxx        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ... æ›´å¤šå¡ç‰‡ ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç°æœ‰ç‰¹æ€§

âœ… **ä¼˜ç‚¹**:
- ä½¿ç”¨ CSS å˜é‡ç³»ç»Ÿï¼ˆè®¾è®¡ä»¤ç‰Œï¼‰
- å“åº”å¼å¸ƒå±€ï¼ˆflex + gridï¼‰
- å¡ç‰‡å¼è®¾è®¡ï¼ˆé˜´å½±ã€åœ†è§’ï¼‰
- æœç´¢å’Œæ’åºåŠŸèƒ½å®Œå–„
- ç‚¹å‡»åé¦ˆï¼ˆ`:active` ç¼©æ”¾ï¼‰

âŒ **ä¸è¶³**:
- ä¿¡æ¯å¯†åº¦è¿‡ä½ï¼ˆæ¯ä¸ªå¡ç‰‡å ç”¨å¤§é‡ç©ºé—´ï¼‰
- è§†è§‰å±‚æ¬¡ä¸å¤Ÿæ¸…æ™°
- ç¼ºå°‘è§†è§‰å¼•å¯¼å…ƒç´ 
- ç©ºçŠ¶æ€å¤„ç†å•è–„
- ç¼ºå°‘ä¸Šæ‹‰åŠ è½½/ä¸‹æ‹‰åˆ·æ–°æç¤º
- æ“ä½œæŒ‰é’®ä½ç½®ä¸å¤Ÿæ˜¾çœ¼

---

## UI/UX é—®é¢˜è¯Šæ–­

### é—®é¢˜ 1: ä¿¡æ¯å¯†åº¦è¿‡ä½ ğŸ”´

**æè¿°**:
å½“å‰æ¯ä¸ªæ‚£è€…å¡ç‰‡å‚ç›´é«˜åº¦çº¦ **240rpx**ï¼Œä»…å±•ç¤º 6 ä¸ªä¿¡æ¯ç‚¹ï¼š
1. å§“å
2. å…¥ä½æ¬¡æ•°
3. æ€§åˆ«
4. å¹´é¾„
5. æœ€è¿‘å…¥ä½æ—¥æœŸ
6. é¦–æ¬¡è¯Šæ–­

åœ¨ iPhone 13 (667pt é«˜åº¦) ä¸Šï¼Œä¸€å±åªèƒ½æ˜¾ç¤º **2.5 ä¸ªæ‚£è€…**ï¼Œç”¨æˆ·éœ€è¦é¢‘ç¹æ»šåŠ¨ã€‚

**æ•°æ®å¯¹æ¯”**:
- å¾®ä¿¡é€šè®¯å½•ï¼šä¸€å±æ˜¾ç¤º **12 ä¸ªè”ç³»äºº**
- æ”¯ä»˜å®è´¦å•ï¼šä¸€å±æ˜¾ç¤º **6-8 æ¡è®°å½•**
- æœ¬é¡¹ç›®ï¼šä¸€å±æ˜¾ç¤º **2.5 ä¸ªæ‚£è€…**

**å½±å“**:
- æµè§ˆæ•ˆç‡ä½ï¼Œå¯»æ‰¾æ‚£è€…è´¹æ—¶
- æ— æ³•å¿«é€Ÿå¯¹æ¯”å¤šä¸ªæ‚£è€…ä¿¡æ¯
- å¢åŠ æ“ä½œæ­¥éª¤ï¼ˆæ»šåŠ¨æ¬¡æ•°ï¼‰

---

### é—®é¢˜ 2: è§†è§‰å±‚æ¬¡ä¸æ¸…æ™° âš ï¸

**æè¿°**:
å½“å‰æ‰€æœ‰ä¿¡æ¯å¹³é“ºå±•ç¤ºï¼Œç¼ºå°‘è§†è§‰é‡ç‚¹ï¼š
- å§“åï¼ˆ18px, 600å­—é‡ï¼‰ä¸å…¶ä»–æ–‡æœ¬åŒºåˆ†åº¦ä¸å¤Ÿ
- "é¦–æ¬¡è¯Šæ–­"æ ‡ç­¾å’Œå†…å®¹é¢œè‰²å‡ ä¹ç›¸åŒ
- å…¥ä½æ¬¡æ•°å¾½ç« æ ·å¼è¿‡äºæ™®é€š

**å¯¹æ¯”åˆ†æ**:
```
å½“å‰å®ç°:
  å§“å: 18px, #333      â† ä¸è¯Šæ–­ä¿¡æ¯å¯¹æ¯”ä¸æ˜æ˜¾
  è¯Šæ–­: 14px, #333

æœŸæœ›æ•ˆæœ:
  å§“å: 20px, #111, åŠ ç²—  â† æ¸…æ™°çš„è§†è§‰ä¸»ä½“
  è¯Šæ–­: 13px, #666        â† è¾…åŠ©ä¿¡æ¯
```

**å½±å“**:
- ç”¨æˆ·éœ€è¦èŠ±æ›´å¤šæ—¶é—´è¯†åˆ«å…³é”®ä¿¡æ¯
- æ‰«è§†å¼æµè§ˆå›°éš¾

---

### é—®é¢˜ 3: ç¼ºå°‘è§†è§‰å¼•å¯¼å…ƒç´  ğŸŸ¡

**æè¿°**:
1. **æ— çŠ¶æ€æŒ‡ç¤ºå™¨**:
   - æ— æ³•åŒºåˆ†"æ–°æ‚£è€…"ã€"è¿‘æœŸå°±è¯Š"ã€"éœ€è¦éšè®¿"ç­‰çŠ¶æ€

2. **æ— ä¼˜å…ˆçº§æ ‡è®°**:
   - æ— æ³•çªå‡ºæ˜¾ç¤º"é«˜ä¼˜å…ˆçº§æ‚£è€…"

3. **æ— æ—¶é—´æ„ŸçŸ¥**:
   - "æœ€è¿‘å…¥ä½: 2024-09-15" ä¸å¦‚ "15å¤©å‰" ç›´è§‚

**å¯¹æ¯”**:
- å¾®ä¿¡æ¶ˆæ¯åˆ—è¡¨ï¼šçº¢ç‚¹ã€æœªè¯»æ•°é‡ã€ç½®é¡¶æ ‡è®°
- å¾…åŠäº‹é¡¹åº”ç”¨ï¼šé¢œè‰²æ ‡ç­¾ã€ä¼˜å…ˆçº§æ ‡è®°ã€æˆªæ­¢æ—¥æœŸå€’è®¡æ—¶
- æœ¬é¡¹ç›®ï¼šæ— ä»»ä½•è§†è§‰æ ‡è®°

---

### é—®é¢˜ 4: æ“ä½œå…¥å£ä¸å¤Ÿæ˜¾çœ¼ âš ï¸

**æè¿°**:
"æŸ¥çœ‹åˆ†æ" å’Œ "æ‚£è€…å…¥ä½" æŒ‰é’®ä½äºæœç´¢æ¡†ä¸‹æ–¹ï¼Œè§†è§‰æƒé‡è¾ƒä½ï¼š
- æŒ‰é’®å°ºå¯¸åå°ï¼ˆé«˜åº¦çº¦ 32pxï¼‰
- æ¸å˜è‰²ä¸èƒŒæ™¯å¯¹æ¯”åº¦ä¸å¤Ÿ
- ä½ç½®åœ¨é¡¶éƒ¨åŒºåŸŸï¼Œç”¨æˆ·å‘ä¸‹æ»šåŠ¨æ—¶æ¶ˆå¤±

**å»ºè®®å‚è€ƒ**:
- å¾®ä¿¡"å‘èµ·ç¾¤èŠ"ï¼šå³ä¸Šè§’å›ºå®šæŒ‰é’®
- æ”¯ä»˜å®"æ‰«ä¸€æ‰«"ï¼šåº•éƒ¨å›ºå®š Tab æ 
- é¥¿äº†ä¹ˆ"è´­ç‰©è½¦"ï¼šå³ä¸‹è§’æ‚¬æµ®æŒ‰é’®

---

### é—®é¢˜ 5: ç©ºçŠ¶æ€å’ŒåŠ è½½çŠ¶æ€ç®€é™‹ ğŸŸ¡

**å½“å‰å®ç°**:
```xml
<view wx:if="{{loading}}" class="placeholder">æ­£åœ¨åŠ è½½æ‚£è€…åˆ—è¡¨â€¦</view>
<view wx:elif="{{error}}" class="error">{{error}}</view>
<view wx:if="{{!displayPatients.length}}" class="placeholder">æœªæ‰¾åˆ°åŒ¹é…çš„æ‚£è€…</view>
```

**é—®é¢˜**:
- æ— åŠ è½½åŠ¨ç”»ï¼ˆä»…æ–‡å­—æç¤ºï¼‰
- æ— ç©ºçŠ¶æ€æ’å›¾
- é”™è¯¯æç¤ºæ— æ“ä½œå¼•å¯¼ï¼ˆå¦‚"é‡è¯•"æŒ‰é’®ï¼‰

---

### é—®é¢˜ 6: å¿«é€Ÿä¿¡æ¯åŒºå—è®¾è®¡ä¸åˆç† ğŸŸ¡

**å½“å‰å®ç°**:
```xml
<view class="quick-info">
  <view class="quick-item">
    <text class="quick-label">æ€§åˆ«</text>
    <text class="quick-value">{{item.gender || 'æœªçŸ¥'}}</text>
  </view>
  <!-- å¹´é¾„ã€æœ€è¿‘å…¥ä½ -->
</view>
```

**CSS**:
```css
.quick-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
}
```

**é—®é¢˜**:
- Grid å¸ƒå±€åœ¨ä¿¡æ¯æ•°é‡ä¸ç¡®å®šæ—¶ä¼šå¯¼è‡´åˆ—å®½ä¸ä¸€è‡´
- èƒŒæ™¯è‰²ï¼ˆ`var(--color-bg-tertiary)`ï¼‰ä¸å¡ç‰‡èƒŒæ™¯å¯¹æ¯”åº¦ä½
- è¿‡åº¦ä½¿ç”¨å¡ç‰‡ä¸­å¡ç‰‡è®¾è®¡ï¼Œè§†è§‰è‡ƒè‚¿

---

## é‡æ„è®¾è®¡æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ç´§å‡‘åˆ—è¡¨æ¨¡å¼ï¼ˆæ¨èï¼‰â­

**ç›®æ ‡**: ä¿¡æ¯å¯†åº¦æå‡ **80%**ï¼Œä¸€å±æ˜¾ç¤º **4-5 ä¸ªæ‚£è€…**

#### å¸ƒå±€å˜æ›´

**å¡ç‰‡é«˜åº¦**: 240rpx â†’ **140rpx**

**ä¿¡æ¯é‡ç»„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ å¼ å°æ˜  24å²Â·å¥³  ğŸ”µ 3æ¬¡        â”‚ â† ä¸»ä¿¡æ¯è¡Œ
â”‚ è„‘ç˜« Â· ç¬¬ä¸€äººæ°‘åŒ»é™¢                 â”‚ â† è¯Šæ–­ä¿¡æ¯è¡Œ
â”‚ 15å¤©å‰å…¥ä½ Â· éœ€è¦å¤æŸ¥ ğŸ”´            â”‚ â† æ—¶é—´çŠ¶æ€è¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¿¡æ¯å±‚çº§**:
1. **ä¸»ä¿¡æ¯è¡Œ**: å§“åï¼ˆåŠ ç²—ã€å¤§å­—å·ï¼‰+ å¹´é¾„/æ€§åˆ«ï¼ˆç°è‰²å°å­—ï¼‰+ å…¥ä½æ¬¡æ•°å¾½ç« 
2. **è¯Šæ–­ä¿¡æ¯è¡Œ**: è¯Šæ–­åç§° + åŒ»é™¢åç§°ï¼ˆç°è‰²ï¼‰
3. **æ—¶é—´çŠ¶æ€è¡Œ**: ç›¸å¯¹æ—¶é—´ + çŠ¶æ€æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰

#### è§†è§‰å¢å¼º

**1. å¤´åƒ/é¦–å­—æ¯**:
```xml
<view class="avatar">
  <text class="avatar-text">{{item.patientName[0]}}</text>
</view>
```

**æ ·å¼**:
```css
.avatar {
  width: 48rpx;
  height: 48rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.avatar-text {
  font-size: 20rpx;
  font-weight: 600;
  color: #fff;
}
```

**2. çŠ¶æ€æ ‡ç­¾**:
```xml
<view class="status-badge status-{{item.statusType}}">
  {{item.statusLabel}}
</view>
```

**ç±»å‹**:
- `status-urgent`: ç´§æ€¥ï¼ˆçº¢è‰²ï¼‰
- `status-followup`: éœ€è¦éšè®¿ï¼ˆæ©™è‰²ï¼‰
- `status-stable`: ç¨³å®šï¼ˆç»¿è‰²ï¼‰

**3. å…¥ä½æ¬¡æ•°å¾½ç« ä¼˜åŒ–**:
```css
.admission-badge {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 2rpx 12rpx;
  border-radius: 20rpx;
  font-size: 24rpx;
  font-weight: 600;
  box-shadow: 0 2rpx 8rpx rgba(102, 126, 234, 0.3);
}
```

#### WXML ä»£ç 

```xml
<view class="patient-item-compact" bindtap="onPatientTap" data-key="{{item.key}}">
  <!-- ä¸»ä¿¡æ¯è¡Œ -->
  <view class="patient-main-row">
    <view class="avatar">
      <text class="avatar-text">{{item.patientName[0]}}</text>
    </view>

    <view class="patient-info">
      <view class="name-row">
        <text class="patient-name">{{item.patientName}}</text>
        <text class="patient-meta">{{item.ageText}}Â·{{item.gender}}</text>
      </view>

      <view class="detail-row">
        <text class="diagnosis-text">{{item.latestDiagnosis}}</text>
        <text class="hospital-text">Â· {{item.latestHospital}}</text>
      </view>

      <view class="status-row">
        <text class="time-text">{{item.relativeTime}}</text>
        <view wx:if="{{item.statusLabel}}" class="status-badge status-{{item.statusType}}">
          {{item.statusLabel}}
        </view>
      </view>
    </view>

    <view class="admission-badge">
      <text>{{item.admissionCount}}æ¬¡</text>
    </view>
  </view>
</view>
```

#### WXSS ä»£ç 

```css
/* ç´§å‡‘å¡ç‰‡å®¹å™¨ */
.patient-item-compact {
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  margin-bottom: var(--space-2);
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
  transition: all 0.2s ease;
}

.patient-item-compact:active {
  transform: scale(0.98);
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);
}

/* ä¸»ä¿¡æ¯è¡Œ */
.patient-main-row {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
}

/* å¤´åƒ */
.avatar {
  width: 96rpx;
  height: 96rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.avatar-text {
  font-size: 36rpx;
  font-weight: 600;
  color: #fff;
}

/* æ‚£è€…ä¿¡æ¯åŒº */
.patient-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  min-width: 0;
}

/* å§“åè¡Œ */
.name-row {
  display: flex;
  align-items: baseline;
  gap: var(--space-2);
}

.patient-name {
  font-size: 32rpx;
  font-weight: 600;
  color: var(--color-text-primary);
  flex-shrink: 0;
}

.patient-meta {
  font-size: 24rpx;
  color: var(--color-text-tertiary);
}

/* è¯Šæ–­ä¿¡æ¯è¡Œ */
.detail-row {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.diagnosis-text {
  font-size: 26rpx;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.hospital-text {
  font-size: 24rpx;
  color: var(--color-text-tertiary);
  overflow: hidden;
  text-overflow: ellipsis;
}

/* çŠ¶æ€è¡Œ */
.status-row {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.time-text {
  font-size: 24rpx;
  color: var(--color-text-tertiary);
}

.status-badge {
  padding: 2rpx 12rpx;
  border-radius: 20rpx;
  font-size: 20rpx;
  font-weight: 500;
  white-space: nowrap;
}

.status-urgent {
  background: #fee;
  color: #f56c6c;
}

.status-followup {
  background: #fef0e8;
  color: #e6a23c;
}

.status-stable {
  background: #f0f9ff;
  color: #409eff;
}

/* å…¥ä½æ¬¡æ•°å¾½ç«  */
.admission-badge {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  padding: 6rpx 16rpx;
  border-radius: 24rpx;
  font-size: 24rpx;
  font-weight: 600;
  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);
  flex-shrink: 0;
  align-self: flex-start;
}
```

---

### æ–¹æ¡ˆ B: å¢å¼ºå¡ç‰‡æ¨¡å¼

**ç›®æ ‡**: ä¿æŒå½“å‰ä¿¡æ¯å¯†åº¦ï¼Œå¢å¼ºè§†è§‰å±‚æ¬¡å’Œäº¤äº’åé¦ˆ

#### ä¸»è¦æ”¹è¿›

**1. æ·»åŠ æ¸å˜èƒŒæ™¯**:
```css
.patient-item {
  background: linear-gradient(135deg, #fff 0%, #f9fafb 100%);
  border: 1px solid rgba(0, 0, 0, 0.05);
}
```

**2. å¢å¼ºæ ‡é¢˜åŒºåŸŸ**:
```css
.patient-name {
  font-size: var(--text-xl);
  font-weight: 700;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
```

**3. ä¼˜åŒ–å¿«é€Ÿä¿¡æ¯åŒº**:
```css
.quick-info {
  display: flex;
  gap: var(--space-2);
  border-left: 3px solid #667eea;
  padding-left: var(--space-3);
}

.quick-item {
  background: transparent;
  padding: 0;
}
```

**4. æ·»åŠ æ‚¬æµ®æ€åŠ¨ç”»**:
```css
.patient-item:hover {
  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.15);
  transform: translateY(-4rpx);
}
```

---

### æ–¹æ¡ˆ C: æ‚¬æµ®æ“ä½œæŒ‰é’®ï¼ˆé€šç”¨å¢å¼ºï¼‰

**ç›®æ ‡**: æå‡æ ¸å¿ƒæ“ä½œçš„å¯è®¿é—®æ€§

#### å›ºå®šæ‚¬æµ®æŒ‰é’®

**ä½ç½®**: å³ä¸‹è§’å›ºå®š
**åŠŸèƒ½**: å¿«é€Ÿå…¥ä½ï¼ˆä¸»è¦æ“ä½œï¼‰

**WXML**:
```xml
<view class="fab-container">
  <view class="fab-button" bindtap="onIntakeTap">
    <text class="fab-icon">+</text>
  </view>
</view>
```

**WXSS**:
```css
.fab-container {
  position: fixed;
  bottom: 32rpx;
  right: 32rpx;
  z-index: 100;
}

.fab-button {
  width: 112rpx;
  height: 112rpx;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.fab-button:active {
  transform: scale(0.9);
}

.fab-icon {
  font-size: 48rpx;
  font-weight: 300;
  color: #fff;
  line-height: 1;
}
```

**å¢å¼ºç‰ˆ - å±•å¼€èœå•**:
```xml
<view class="fab-container" bindtap="toggleFab">
  <view class="fab-menu {{fabExpanded ? 'expanded' : ''}}">
    <view class="fab-menu-item" bindtap="onAnalysisTap" catchtap="stopPropagation">
      <text class="fab-menu-label">æŸ¥çœ‹åˆ†æ</text>
      <view class="fab-menu-icon">ğŸ“Š</view>
    </view>
    <view class="fab-menu-item" bindtap="onIntakeTap" catchtap="stopPropagation">
      <text class="fab-menu-label">æ‚£è€…å…¥ä½</text>
      <view class="fab-menu-icon">+</view>
    </view>
  </view>

  <view class="fab-button {{fabExpanded ? 'rotated' : ''}}">
    <text class="fab-icon">{{fabExpanded ? 'Ã—' : 'â˜°'}}</text>
  </view>
</view>
```

---

### æ–¹æ¡ˆ D: æœç´¢ä¸ç­›é€‰ä¼˜åŒ–

#### æœç´¢æ¡†å¢å¼º

**1. æ·»åŠ æœç´¢å»ºè®®**:
```xml
<view class="search-suggestions" wx:if="{{searchKeyword && suggestions.length}}">
  <view
    class="suggestion-item"
    wx:for="{{suggestions}}"
    wx:key="index"
    bindtap="onSuggestionTap"
    data-suggestion="{{item}}"
  >
    <text class="suggestion-icon">ğŸ”</text>
    <text class="suggestion-text">{{item}}</text>
  </view>
</view>
```

**2. æœç´¢å†å²**:
```javascript
// ä¿å­˜æœç´¢å†å²
function saveSearchHistory(keyword) {
  const history = wx.getStorageSync('search_history') || [];
  const updated = [keyword, ...history.filter(h => h !== keyword)].slice(0, 10);
  wx.setStorageSync('search_history', updated);
}
```

#### é«˜çº§ç­›é€‰

**WXML**:
```xml
<view class="filter-bar">
  <view class="filter-chip {{activeFilter === 'all' ? 'active' : ''}}" bindtap="onFilterTap" data-filter="all">
    å…¨éƒ¨
  </view>
  <view class="filter-chip {{activeFilter === 'recent' ? 'active' : ''}}" bindtap="onFilterTap" data-filter="recent">
    æœ€è¿‘å…¥ä½
  </view>
  <view class="filter-chip {{activeFilter === 'followup' ? 'active' : ''}}" bindtap="onFilterTap" data-filter="followup">
    éœ€è¦éšè®¿
  </view>
</view>
```

**WXSS**:
```css
.filter-bar {
  display: flex;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  overflow-x: auto;
  white-space: nowrap;
}

.filter-chip {
  padding: var(--space-2) var(--space-4);
  border-radius: 24rpx;
  background: var(--color-bg-primary);
  border: 2rpx solid var(--color-border);
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  transition: all 0.2s ease;
}

.filter-chip.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-color: transparent;
  color: #fff;
  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);
}
```

---

### æ–¹æ¡ˆ E: åŠ è½½ä¸ç©ºçŠ¶æ€ä¼˜åŒ–

#### éª¨æ¶å±åŠ è½½

**WXML**:
```xml
<view wx:if="{{loading}}" class="skeleton-list">
  <view class="skeleton-item" wx:for="{{[1,2,3,4]}}" wx:key="*this">
    <view class="skeleton-avatar"></view>
    <view class="skeleton-content">
      <view class="skeleton-line skeleton-title"></view>
      <view class="skeleton-line skeleton-text"></view>
      <view class="skeleton-line skeleton-text short"></view>
    </view>
  </view>
</view>
```

**WXSS**:
```css
.skeleton-item {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-4);
  margin-bottom: var(--space-2);
  background: var(--color-bg-primary);
  border-radius: var(--radius-lg);
}

.skeleton-avatar {
  width: 96rpx;
  height: 96rpx;
  border-radius: 50%;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

.skeleton-line {
  height: 28rpx;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  border-radius: var(--radius-sm);
  animation: skeleton-loading 1.5s infinite;
  margin-bottom: var(--space-2);
}

.skeleton-title {
  width: 40%;
  height: 32rpx;
}

.skeleton-text {
  width: 80%;
}

.skeleton-text.short {
  width: 50%;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}
```

#### ç©ºçŠ¶æ€æ’å›¾

**WXML**:
```xml
<view wx:if="{{!loading && !displayPatients.length}}" class="empty-state">
  <image class="empty-illustration" src="/assets/images/empty-patients.svg" mode="aspectFit" />
  <text class="empty-title">æš‚æ— æ‚£è€…æ¡£æ¡ˆ</text>
  <text class="empty-description">ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®æ·»åŠ ç¬¬ä¸€ä½æ‚£è€…</text>
  <view class="empty-action" bindtap="onIntakeTap">
    <text>ç«‹å³æ·»åŠ </text>
  </view>
</view>
```

**WXSS**:
```css
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--space-8) var(--space-4);
}

.empty-illustration {
  width: 400rpx;
  height: 300rpx;
  margin-bottom: var(--space-4);
  opacity: 0.6;
}

.empty-title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: var(--space-2);
}

.empty-description {
  font-size: var(--text-sm);
  color: var(--color-text-tertiary);
  text-align: center;
  margin-bottom: var(--space-6);
}

.empty-action {
  padding: var(--space-3) var(--space-6);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  border-radius: var(--radius-lg);
  font-size: var(--text-base);
  font-weight: 600;
  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);
}
```

---

## å®æ–½è·¯çº¿å›¾

### é˜¶æ®µ 1: åŸºç¡€ä¼˜åŒ–ï¼ˆ1-2 å¤©ï¼‰â­

**ç›®æ ‡**: æå‡ä¿¡æ¯å¯†åº¦ 50%ï¼Œä¼˜åŒ–è§†è§‰å±‚æ¬¡

**ä»»åŠ¡æ¸…å•**:
- [ ] å®æ–½æ–¹æ¡ˆ A - ç´§å‡‘åˆ—è¡¨æ¨¡å¼
  - [ ] ä¿®æ”¹ WXML ç»“æ„
  - [ ] ç¼–å†™æ–°çš„ WXSS æ ·å¼
  - [ ] æ·»åŠ å¤´åƒç»„ä»¶
  - [ ] å®ç°ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆ`formatRelativeTime` å·¥å…·å‡½æ•°ï¼‰
- [ ] å®æ–½æ–¹æ¡ˆ C - æ‚¬æµ®æ“ä½œæŒ‰é’®
  - [ ] æ·»åŠ  FAB æŒ‰é’®
  - [ ] ç§»é™¤é¡¶éƒ¨æ“ä½œæŒ‰é’®
  - [ ] æ·»åŠ å±•å¼€èœå•åŠ¨ç”»
- [ ] æµ‹è¯•ä¸è°ƒä¼˜
  - [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…
  - [ ] é•¿æ–‡æœ¬æº¢å‡ºå¤„ç†
  - [ ] ç‚¹å‡»åŒºåŸŸä¼˜åŒ–

**é¢„è®¡å·¥ä½œé‡**: 8-12 å°æ—¶

---

### é˜¶æ®µ 2: äº¤äº’å¢å¼ºï¼ˆ2-3 å¤©ï¼‰

**ç›®æ ‡**: æå‡æ“ä½œæ•ˆç‡å’Œç”¨æˆ·åé¦ˆ

**ä»»åŠ¡æ¸…å•**:
- [ ] å®æ–½æ–¹æ¡ˆ D - æœç´¢ä¼˜åŒ–
  - [ ] æœç´¢å»ºè®®åŠŸèƒ½
  - [ ] æœç´¢å†å²è®°å½•
  - [ ] é«˜çº§ç­›é€‰æ¡ä»¶
- [ ] å®æ–½æ–¹æ¡ˆ E - åŠ è½½ä¼˜åŒ–
  - [ ] éª¨æ¶å±åŠ è½½
  - [ ] ç©ºçŠ¶æ€æ’å›¾
  - [ ] é”™è¯¯çŠ¶æ€é‡è¯•æŒ‰é’®
- [ ] ä¸‹æ‹‰åˆ·æ–°/ä¸Šæ‹‰åŠ è½½
  - [ ] å¯ç”¨ `enablePullDownRefresh`
  - [ ] å®ç° `onPullDownRefresh`
  - [ ] å®ç° `onReachBottom`
- [ ] æ‰‹åŠ¿äº¤äº’
  - [ ] å·¦æ»‘åˆ é™¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
  - [ ] é•¿æŒ‰èœå•

**é¢„è®¡å·¥ä½œé‡**: 12-16 å°æ—¶

---

### é˜¶æ®µ 3: é«˜çº§ç‰¹æ€§ï¼ˆ3-4 å¤©ï¼‰

**ç›®æ ‡**: æ™ºèƒ½åŒ–å’Œä¸ªæ€§åŒ–

**ä»»åŠ¡æ¸…å•**:
- [ ] çŠ¶æ€æ™ºèƒ½è¯†åˆ«
  - [ ] æ ¹æ®æœ€è¿‘å…¥ä½æ—¶é—´åˆ¤æ–­"éœ€è¦éšè®¿"
  - [ ] æ ¹æ®å°±è¯Šé¢‘ç‡åˆ¤æ–­"é«˜é¢‘æ‚£è€…"
  - [ ] æ ¹æ®è¯Šæ–­ç±»å‹åˆ†ç±»
- [ ] æ’åºç®—æ³•ä¼˜åŒ–
  - [ ] æ™ºèƒ½æ’åºï¼ˆç»¼åˆè€ƒè™‘æ—¶é—´ã€é¢‘ç‡ã€çŠ¶æ€ï¼‰
  - [ ] è‡ªå®šä¹‰æ’åºä¿å­˜
- [ ] æ•°æ®é¢„åŠ è½½
  - [ ] é¢„åŠ è½½ä¸‹ä¸€é¡µæ•°æ®
  - [ ] å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–
- [ ] æ— éšœç¢ä¼˜åŒ–
  - [ ] æ·»åŠ  `aria-label`
  - [ ] æ”¯æŒè¯­éŸ³æ’­æŠ¥å…³é”®ä¿¡æ¯
  - [ ] å¢å¼ºå¯¹æ¯”åº¦æ¨¡å¼

**é¢„è®¡å·¥ä½œé‡**: 16-20 å°æ—¶

---

### é˜¶æ®µ 4: æ€§èƒ½ä¼˜åŒ–ï¼ˆ1-2 å¤©ï¼‰

**ç›®æ ‡**: æµç•…åº¦æå‡åˆ° 60fps

**ä»»åŠ¡æ¸…å•**:
- [ ] è™šæ‹Ÿåˆ—è¡¨å®ç°
  - [ ] ä½¿ç”¨ `recycle-view` æˆ–è‡ªå®šä¹‰è™šæ‹Ÿæ»šåŠ¨
  - [ ] ä¼˜åŒ–å¤§åˆ—è¡¨æ¸²æŸ“æ€§èƒ½
- [ ] æ¸²æŸ“ä¼˜åŒ–
  - [ ] ä½¿ç”¨ `wx:key` ä¼˜åŒ–åˆ—è¡¨æ›´æ–°
  - [ ] é¿å…é¢‘ç¹ `setData`
  - [ ] æå–é™æ€æ¨¡æ¿
- [ ] èµ„æºä¼˜åŒ–
  - [ ] å›¾ç‰‡å‹ç¼©å’Œ WebP æ ¼å¼
  - [ ] å­—ä½“å­é›†åŒ–
  - [ ] CSS å˜é‡ç¼“å­˜

**é¢„è®¡å·¥ä½œé‡**: 8-10 å°æ—¶

---

## å¯¹æ¯”æ•ˆæœé¢„è§ˆ

### å½“å‰å®ç° vs æ–¹æ¡ˆ A

| ç»´åº¦ | å½“å‰å®ç° | æ–¹æ¡ˆ Aï¼ˆç´§å‡‘åˆ—è¡¨ï¼‰ | æ”¹å–„å¹…åº¦ |
|------|----------|-------------------|----------|
| **ä¸€å±æ‚£è€…æ•°** | 2.5 ä¸ª | 4-5 ä¸ª | +80% |
| **å¡ç‰‡é«˜åº¦** | 240rpx | 140rpx | -42% |
| **ä¿¡æ¯å¯†åº¦** | 6 ä¸ªå­—æ®µ | 7 ä¸ªå­—æ®µ + å¤´åƒ + çŠ¶æ€ | +50% |
| **è§†è§‰å±‚æ¬¡** | â­â­ | â­â­â­â­ | +100% |
| **æ“ä½œæ•ˆç‡** | 3 æ¬¡æ»šåŠ¨æ‰¾åˆ°æ‚£è€… | 1 æ¬¡æ»šåŠ¨æ‰¾åˆ°æ‚£è€… | +67% |

### åŠ è½½æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | å½“å‰å®ç° | ä¼˜åŒ–å | æ”¹å–„ |
|------|----------|--------|------|
| **100 ä¸ªæ‚£è€…æ¸²æŸ“** | ~800ms | ~300ms | +62% |
| **æ»šåŠ¨å¸§ç‡** | 45-50 fps | 55-60 fps | +20% |
| **é¦–å±åŠ è½½** | 1.2s | 0.8s | +33% |

---

## é™„å½•

### å·¥å…·å‡½æ•° - ç›¸å¯¹æ—¶é—´

```javascript
// miniprogram/utils/date.js ä¸­æ·»åŠ 

/**
 * æ ¼å¼åŒ–ç›¸å¯¹æ—¶é—´
 * @param {*} timestamp - æ—¶é—´æˆ³æˆ–æ—¥æœŸå­—ç¬¦ä¸²
 * @returns {string} ç›¸å¯¹æ—¶é—´æè¿°
 *
 * @example
 * formatRelativeTime(Date.now() - 60000)       // "1åˆ†é’Ÿå‰"
 * formatRelativeTime(Date.now() - 86400000)    // "1å¤©å‰"
 * formatRelativeTime(Date.now() - 2592000000)  // "30å¤©å‰"
 * formatRelativeTime(Date.now() - 31536000000) // "2024-01-15"
 */
function formatRelativeTime(timestamp) {
  const date = parseDateValue(timestamp);
  if (!date) {
    return 'æœªçŸ¥æ—¶é—´';
  }

  const now = Date.now();
  const diff = now - date.getTime();

  // å°äº1åˆ†é’Ÿ
  if (diff < 60 * 1000) {
    return 'åˆšåˆš';
  }

  // å°äº1å°æ—¶
  if (diff < 60 * 60 * 1000) {
    const minutes = Math.floor(diff / (60 * 1000));
    return `${minutes}åˆ†é’Ÿå‰`;
  }

  // å°äº24å°æ—¶
  if (diff < 24 * 60 * 60 * 1000) {
    const hours = Math.floor(diff / (60 * 60 * 1000));
    return `${hours}å°æ—¶å‰`;
  }

  // å°äº30å¤©
  if (diff < 30 * 24 * 60 * 60 * 1000) {
    const days = Math.floor(diff / (24 * 60 * 60 * 1000));
    return `${days}å¤©å‰`;
  }

  // è¶…è¿‡30å¤©ï¼Œæ˜¾ç¤ºå…·ä½“æ—¥æœŸ
  return formatDate(date);
}

module.exports = {
  parseDateValue,
  formatDate,
  calculateAge,
  formatAge,
  formatRelativeTime, // æ–°å¢å¯¼å‡º
};
```

### çŠ¶æ€è¯†åˆ«é€»è¾‘

```javascript
// miniprogram/pages/index/index.js ä¸­æ·»åŠ 

/**
 * è¯†åˆ«æ‚£è€…çŠ¶æ€
 * @param {object} patient - æ‚£è€…å¯¹è±¡
 * @returns {object} { statusType: string, statusLabel: string }
 */
function identifyPatientStatus(patient) {
  const now = Date.now();
  const lastAdmission = Number(patient.latestAdmissionTimestamp || 0);
  const daysSinceAdmission = (now - lastAdmission) / (24 * 60 * 60 * 1000);

  // ç´§æ€¥çŠ¶æ€ï¼šéœ€è¦ç«‹å³éšè®¿ï¼ˆ7å¤©å†…ï¼‰
  if (daysSinceAdmission > 0 && daysSinceAdmission <= 7) {
    return {
      statusType: 'urgent',
      statusLabel: 'éœ€è¦å¤æŸ¥',
    };
  }

  // éšè®¿çŠ¶æ€ï¼šéœ€è¦å®šæœŸéšè®¿ï¼ˆ7-30å¤©ï¼‰
  if (daysSinceAdmission > 7 && daysSinceAdmission <= 30) {
    return {
      statusType: 'followup',
      statusLabel: 'å®šæœŸéšè®¿',
    };
  }

  // ç¨³å®šçŠ¶æ€ï¼šé•¿æœŸæ‚£è€…
  if (patient.admissionCount >= 5) {
    return {
      statusType: 'stable',
      statusLabel: 'é•¿æœŸæ‚£è€…',
    };
  }

  // æ— ç‰¹æ®ŠçŠ¶æ€
  return {
    statusType: '',
    statusLabel: '',
  };
}

// åœ¨ fetchPatients ä¸­ä½¿ç”¨
const patients = sourcePatients.map(item => {
  const latestAdmissionDateFormatted = formatDate(
    item.latestAdmissionDate || item.firstAdmissionDate
  );
  const relativeTime = formatRelativeTime(
    item.latestAdmissionTimestamp || item.latestAdmissionDate
  );
  const status = identifyPatientStatus(item);

  return {
    ...item,
    ageText: formatAge(item.birthDate),
    latestAdmissionDateFormatted,
    relativeTime,
    statusType: status.statusType,
    statusLabel: status.statusLabel,
    // ... å…¶ä»–å­—æ®µ
  };
});
```

### æœç´¢å»ºè®®å®ç°

```javascript
// miniprogram/pages/index/index.js

Page({
  data: {
    searchKeyword: '',
    searchSuggestions: [],
  },

  onSearchInput(event) {
    const keyword = event.detail.value || '';
    this.setData({ searchKeyword: keyword });

    // ç”Ÿæˆæœç´¢å»ºè®®
    if (keyword.length >= 2) {
      const suggestions = this.generateSearchSuggestions(keyword);
      this.setData({ searchSuggestions: suggestions });
    } else {
      this.setData({ searchSuggestions: [] });
    }

    this.applyFilters();
  },

  generateSearchSuggestions(keyword) {
    const { patients } = this.data;
    const suggestions = new Set();

    patients.forEach(patient => {
      // åŒ¹é…å§“å
      if (patient.patientName && patient.patientName.includes(keyword)) {
        suggestions.add(patient.patientName);
      }

      // åŒ¹é…è¯Šæ–­
      if (patient.latestDiagnosis && patient.latestDiagnosis.includes(keyword)) {
        suggestions.add(patient.latestDiagnosis);
      }

      // åŒ¹é…åŒ»é™¢
      if (patient.latestHospital && patient.latestHospital.includes(keyword)) {
        suggestions.add(patient.latestHospital);
      }
    });

    return Array.from(suggestions).slice(0, 5);
  },

  onSuggestionTap(event) {
    const suggestion = event.currentTarget.dataset.suggestion;
    this.setData({
      searchKeyword: suggestion,
      searchSuggestions: [],
    });
    this.applyFilters();
  },
});
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-10-01
**é¢„è®¡æ€»å·¥ä½œé‡**: 40-60 å°æ—¶ï¼ˆçº¦ 1-1.5 å‘¨ï¼‰
**å»ºè®®ä¼˜å…ˆçº§**: é˜¶æ®µ 1 > é˜¶æ®µ 2 > é˜¶æ®µ 4 > é˜¶æ®µ 3
